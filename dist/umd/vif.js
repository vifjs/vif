!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).t={})}(this,(function(t){"use strict";const e=(t,e,o,s)=>{const r=e.handler||(e.handler=new n);r[s]=o(t.o),e.addEventListener(s,r)};class n{handleEvent(t){this[t.type](t)}}let o={},s=null;const r=t=>{o[t]&&(o[t](),o[t]=!1)},c=document,l=t=>c.createElement(t),i=(t,e)=>t.cloneNode(e),f=t=>t.children,u=t=>t.content,a=t=>t.nextSibling,p=t=>t.l||t.children,d=(t,e)=>t.name.substring(e),h=t=>0===t.name.indexOf("x-"),x=t=>0===t.tagName.indexOf("X-"),y=t=>"TEMPLATE"===t.tagName,m=t=>!!nt[t.tagName]||y(t),w={i(t){let e=this;e.o||(e.o=t||{}),e.u||(e.u=new Set)},p(){this.h()},m(t,e,n){let o=this,r=e.length-1,c=n;for(;r>=0;){const l=e[r],i=t[l.v];if(l.$&&(i.S=l.T,(n||o.u).add(i),s&&s(i.tagName)),!n)for(const[t,e]of l.j){const n=e.L(o,i,e.M,t);n&&o.u.add(n)}if(l.T){(!l.$||(c=!m(i)&&(i.u=new Set)))&&o.m(p(i),l.T,c)}r--}},h(){for(const t of this.u)t.p&&t.p();this.u.clear()}};function b(t){this.i(t)}b.prototype=w;let E=null;const g=t=>{const e=t=>{if(void 0!==t){const n=E;E=null,e.value=t;for(const t of e.k)t();E=n}else E&&(e.k.add(E),E.C.add(e.k));return e.value};return e.value=t,e.O=!0,e.k=new Set,e},v=t=>{const e=E;return E=t,E.C=new Set,E.p=(t=>()=>{for(const e of t.C)e.delete(t)})(E),t(),E=e,t};let $=c.createComment(""),S=l("template"),T=c.createDocumentFragment();const j=t=>{let e=u(t).firstChild;for(;e;){const t=a(e);1!==e.nodeType&&e.remove(),e=t}},L=()=>{},M=(t,...e)=>t.reduce(((n,o,s)=>n+(o+(s===t.length-1?"":e[s]))),""),k=l("style"),C="css-x";let O=1;const R=(t,e)=>"$"+(e||O)+t,V=(t,...e)=>{if("string"==typeof t)return`${C}="${R(t,O)}"`;{const n=M(t,e);k.textContent+=n,k.parentElement||c.head.appendChild(k)}},H=(t,e,n)=>{const o=n,s=t.R;e.setAttribute(C,R(o,s))},U=(t,e,n)=>{const o=n,s=t.useRef(o);let r=!0;return v((()=>{const t=s();if(r){for(const n of t)n(e);r=!1}else t[t.length-1](e)}))},X=(t,e,n)=>{const o=e.style.display;return v((()=>{n(t.o)?o?e.style.display=o:e.style.removeProperty("display"):e.style.display="none"}))},A=(t,e,n)=>v((()=>e.textContent=n(t.o))),P=(t,e,n,o)=>v((()=>e.setAttribute(o,n(t.o)))),q=t=>"x-text"===t?A:"x-show"===t?X:"x-ref"===t?U:"x-css"===t?H:P,z=(t,e,n,o)=>{e.o||(e.o={});let s=null;const r={V:(t,e)=>s={H:t,U:e}},c=v((()=>{const s=e.o[o],c=n(t.o);s&&s.O?r.V(s,c):e.o[o]=c}));return s&&s.H(s.U),r.V=(t,e)=>t(e),c},B={},D=t=>{if(B[t])return B[t];let e=Object.getPrototypeOf((function(){})).constructor,n=/^[\n\s]*if.*\(.*\)/.test(t.trim())||/^(let|const)\s/.test(t.trim())?`(()=>{ ${t} })()`:t;let o=(()=>{try{let o=new e(["scope"],`with(scope){return ${n}};`);return Object.defineProperty(o,"name",{value:`VifExp "${t}"`}),o}catch(e){return console.error("VifExp error : "+t,e),!1}})();return B[t]=o,o},F=(t,e,n)=>{_(e);let o=[];const s="item",r=e.getAttribute(s)||s;return v((()=>{const s=n(t.o);((t,e,n,o,s)=>{let r=0;const c=n.length,l=o.length;let i=l-c;for(;r<c&&r<l;)n[r]!==o[r]&&Y(e,r,o[r]),r++;for(;i>0;)W(e,t,r,s,o[r]),i--,r++;i<0&&Z(e,r,r-i)})(t.o,e,o,s,r),o=s.slice()}))},G=(t,e,n)=>{_(e);let o=!1;return v((()=>{const s=!!n(t.o);s!==o&&(o=s,s?W(e,t.o,0):Z(e,0,1))}))};let I=location;const J=()=>I.pathname+I.search,K=g(J());addEventListener("popstate",(()=>{I=location,K(J())}));const N=t=>{if("string"==typeof t){const e=new URL(t,I);if(I.href!==e.href)return I=e,history.pushState({},"",I),K(J())}else{t.preventDefault();const e=t.currentTarget.href;if(e)return N(e)}};N.route=K;const Q=(t,e,n)=>{_(e);const o=new RegExp(n||"."),s="params",r=e.getAttribute(s)||s;let c=null;return v((()=>{const n=K().match(o)||null;n!==c&&(n&&c?Y(e,0,n):n?W(e,t.o,0,r,n):Z(e,0,1)),c=n}))},W=(t,e,n,o,s)=>{const r=t.X;let c=r[n+1];const l=i(u(t),!0);c?c.H&&c.H(s):c=r[n+1]=((t,e,n,o)=>{const s=n&&g(o);return s&&(s.index=e),{A:new b(n?{...t,[n]:s}:t),H:s}})(e,n,o,s),c.P=l.lastChild,t.S&&c.A.m(f(l),t.S);const p=r[n].P;p.parentNode.insertBefore(l,a(p))},Y=(t,e,n)=>{t.X[e+1].H(n)},Z=(t,e,n)=>{const o=t.X,s=o[e].P;for(;e++<n;){let t=a(s);const n=o[e].P;for(;t!==n;){const e=a(t);t.remove(),t=e}t.remove(),o[e].A.p()}},_=t=>{j(t);const e=t.X=[{P:i($)}];u(t).append(i($)),t.p=()=>{for(let t=1;t<e.length;t++)e[t].A.p()},t.replaceWith(e[0].P)},tt=t=>{const n=[];for(let s=0;s<t.length;s++){let r=t[s];const c=y(r),l=!c&&x(r),i={v:s,T:!1,$:c||l,j:new Map};let f=r.attributes.length;for(;f--;){const t=r.attributes[f];if(h(t)){const n=0===t.name.indexOf("x-on:"),s=d(t,n?5:2),f={M:"ref"===s||"css"===s||"route"===s?t.value:D(t.value||""),L:l?z:c?"x-for"===(o=t.name)?F:"x-if"===o?G:"x-route"===o?Q:void 0:n?e:q(t.name)};i.j.set(s,f),!l&&r.removeAttribute(t.name)}}const a=p(r=c?u(r):r);a.length&&(i.T=tt(a)),(i.j.size||i.T||l)&&n.push(i)}var o;return n.length>0&&n};class et extends HTMLElement{constructor(){super(),this.i(),this.q={}}onMount(){}connectedCallback(){let t=this,e=t.o;for(const n of t.attributes)if(h(n)){const t=d(n,2);e[t]=g(e[t])}else e[n.name]=n.value||!0;t.onMount({props:e}),t.B()}onUnmount(){}p(){let t=this;t.onUnmount({props:t.o}),t.h()}B(){let t=this;const e=t.D;let n=e.F,o=e.T,s=e.R;const r=n?L:M,c=s?L:V,l=e.G,a={html:r,css:c,props:t.o},p=l.call(t,a);if("string"==typeof p?(n=e.F=(t=>{let e=i(S);return e.innerHTML=t,j(e),u(e)})(p),o=e.T=tt(f(n))):n||(n=p&&p!==t?(t=>{let e=i(T);return e.append(...t),e})(p):t,o=t.S||tt(t.l||f(n))),t.R=e.R=s||O++,e.F&&(n=i(n,!0)),o&&t.m(t.l||f(n),o),n!==t){const e=t.parentNode;e.l||(e.l=[].slice.call(f(e))),t.replaceWith(n)}}useEffect(t){this.u.add(v(t))}useRef(t,e,n){const o=this.q,s=o[t]||(o[t]=g([]));if(!e)return s;{const t=s.value;n?t[(t.length||1)-1]=e:t.push(e),s(t)}}}Object.assign(et.prototype,w);const nt={},ot=g(localStorage.getItem("locale")||navigator.language),st=(t,e)=>t[e]||t[t.default],rt=t=>{const e=g();let n=[];return e.onload=t=>{e()?t():n.push(t)},v((()=>{const[o,s]=ot().split("-"),r=st(st(t,o),s);r&&r().then((t=>{e(t.default),n&&(n=n.forEach((t=>t())))}))})),e};rt.locale=ot,t.useDefine=(t,e)=>{const n="X-"+t.toUpperCase();return nt[n]=class extends et{constructor(){super()}},nt[n].G=e,nt[n].prototype.D=nt[n],customElements.define(`x-${t}`,nt[n]),nt[n]},t.useEffect=v,t.useI18n=rt,t.useNavigate=N,t.useObserve=t=>{o={...t,...o},s=r},t.useSignal=g}));
