!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).t={})}(this,(function(t){"use strict";const e=(t,e,o,s)=>{const r=e.handler||(e.handler=new n);r[s]=o(t.o),e.addEventListener(s,r)};class n{handleEvent(t){this[t.type](t)}}let o={},s=null;const r=t=>{o[t]&&(o[t](),o[t]=!1)},c=document,l=t=>c.createElement(t),i=(t,e)=>t.cloneNode(e),f=t=>t.children,u=t=>t.l||t.children,a=(t,e)=>t.name.substring(e),p=t=>0===t.name.indexOf("x-"),d=t=>0===t.tagName.indexOf("X-"),h=t=>!!t.content,x=t=>!!tt[t.tagName]||h(t),y={i(t){let e=this;e.o||(e.o=t||{}),e.u||(e.u=new Set)},p(){this.h()},m(t,e,n){let o=this,r=e.length-1,c=n;for(;r>=0;){const l=e[r],i=t[l.v];if(l.$&&(i.S=l.j,(n||o.u).add(i),s&&s(i.tagName)),!n)for(const[t,e]of l.k){const n=e.C(o,i,e.L,t);n&&o.u.add(n)}if(l.j){(!l.$||(c=!x(i)&&(i.u=new Set)))&&o.m(u(i),l.j,c)}r--}},h(){for(const t of this.u)t.p&&t.p();this.u.clear()}};function m(t){this.i(t)}m.prototype=y;let w=null;const b=t=>{const e=t=>{if(void 0!==t){e.value=t;for(const t of e.M)t()}else w&&(e.M.add(w),w.O.add(e.M));return e.value};return e.value=t,e.T=!0,e.M=new Set,e.effect=e.M,e},g=t=>{const e=w;return w=t,w.O=new Set,w.p=(t=>()=>{for(const e of t.O)e.delete(t)})(w),t(),w=e,t};let v=c.createComment(""),E=l("template"),$=c.createDocumentFragment();const S=()=>{},j=(t,...e)=>t.reduce(((n,o,s)=>n+(o+(s===t.length-1?"":e[s]))),""),k=l("style"),C="css-x";let L=1;const M=(t,e)=>"$"+(e||L)+t,O=(t,...e)=>{if("string"==typeof t)return`${C}="${M(t,L)}"`;{const n=j(t,e);k.textContent+=n,k.parentElement||c.head.appendChild(k)}},T=(t,e,n)=>{const o=n,s=t.V;e.setAttribute(C,M(o,s))},V=(t,e,n)=>{const o=n,s=t.H(o);let r=!0;return g((()=>{const t=s();if(r){for(const n of t)n(e);r=!1}else t[t.length-1](e)}))},H=(t,e,n)=>{const o=e.style.display;return g((()=>{n(t.o)?o?e.style.display=o:e.style.removeProperty("display"):e.style.display="none"}))},R=(t,e,n)=>g((()=>e.textContent=n(t.o))),U=(t,e,n,o)=>g((()=>e.setAttribute(o,n(t.o)))),X=t=>"x-text"===t?R:"x-show"===t?H:"x-ref"===t?V:"x-css"===t?T:U,q=(t,e,n,o)=>{e.o||(e.o={});let s=null;const r={R:(t,e)=>s={U:t,X:e}},c=g((()=>{const s=e.o[o],c=n(t.o);s&&s.T?r.R(s,c):e.o[o]=c}));return s&&s.U(s.X),r.R=(t,e)=>t(e),c},z={},A=t=>{if(z[t])return z[t];let e=Object.getPrototypeOf((function(){})).constructor,n=/^[\n\s]*if.*\(.*\)/.test(t.trim())||/^(let|const)\s/.test(t.trim())?`(()=>{ ${t} })()`:t;let o=(()=>{try{let o=new e(["scope"],`with(scope){return ${n}};`);return Object.defineProperty(o,"name",{value:`VifExp "${t}"`}),o}catch(e){return console.error("VifExp error : "+t,e),!1}})();return z[t]=o,o},B=(t,e,n)=>{Y(e);let o=[];const s="item",r=e.getAttribute(s)||s;return g((()=>{const s=n(t.o);((t,e,n,o,s)=>{let r=0;const c=n.length,l=o.length;let i=l-c;for(;r<c&&r<l;)n[r]!==o[r]&&Q(e,r,o[r]),r++;for(;i>0;)P(e,t,r,s,o[r]),i--,r++;for(;i<0;)W(e,r),i++,r++})(t.o,e,o,s,r),o=s.slice()}))},D=(t,e,n)=>{Y(e);let o=!1;return g((()=>{const s=!!n(t.o);s!==o&&(o=s,s?P(e,t.o,0):W(e,0))}))};let F=location;const G=()=>F.pathname+F.search,I=b(G());addEventListener("popstate",(()=>{F=location,I(G())}));const J=t=>{if("string"==typeof t){const e=new URL(t,F);if(F.href!==e.href)return F=e,history.pushState({},"",F),I(G())}else{t.preventDefault();const e=t.currentTarget.href;if(e)return J(e)}};J.route=I;const K=(t,e,n)=>{Y(e);const o=new RegExp(n||"."),s="params",r=e.getAttribute(s)||s;let c=null;return g((()=>{const n=I().match(o)||null;n!==c&&(n&&c?Q(e,0,n):n?P(e,t.o,0,r,n):W(e,0)),c=n}))},N=()=>i(v),P=(t,e,n,o,s)=>{const r=t.q;let c=r[n+1];const l=i(t.content,!0);c?c.U&&c.U(s):c=r[n+1]=((t,e,n,o)=>{const s=N(),r=n&&b(o);return r&&(r.index=e),{A:s,B:new m(n?{...t,[n]:r}:t),U:r}})(e,n,o,s),t.S&&c.B.m(f(l),t.S),r[n].A.replaceWith(r[n].A,l,c.A)},Q=(t,e,n)=>{t.q[e+1].U(n)},W=(t,e)=>{const n=t.q;let o=n[e].A.nextSibling;const s=n[e+1].A;for(n[e+1].B.p();o!==s;){const t=o;o=o.nextSibling,t.remove()}},Y=t=>{t.q=[{A:N()}],t.p=()=>{for(let e=1;e<t.q.length;e++)t.q[e].B.p()},t.replaceWith(t.q[0].A)},Z=t=>{const n=[];for(let s=0;s<t.length;s++){let r=t[s];const c=h(r),l=!c&&d(r),i={v:s,j:!1,$:c||l,k:new Map};let f=r.attributes.length;for(;f--;){const t=r.attributes[f];if(p(t)){const n=0===t.name.indexOf("x-on:"),s=a(t,n?5:2),f={L:"ref"===s||"css"===s||"route"===s?t.value:A(t.value||""),C:l?q:c?"x-for"===(o=t.name)?B:"x-if"===o?D:"x-route"===o?K:void 0:n?e:X(t.name)};i.k.set(s,f),!l&&r.removeAttribute(t.name)}}const x=u(r=r.content||r);x.length&&(i.j=Z(x)),(i.k.size||i.j||l)&&n.push(i)}var o;return n.length>0&&n};class _ extends HTMLElement{constructor(){super(),this.i(),this.D={}}onMount(){}connectedCallback(){let t=this,e=t.o;for(const n of t.attributes)if(p(n)){const t=a(n,2);e[t]=b(e[t])}else e[n.name]=n.value||!0;t.useRef=t.H,t.onMount({props:e}),t.F()}onUnmount(){}p(){let t=this;t.onUnmount({props:t.o}),t.h()}F(){let t=this;const e=t.G;let n=e.I,o=e.j,s=e.V;const r=n?S:j,c=s?S:O,l=e.J,u={html:r,css:c,props:t.o},a=l.call(t,u);if(a&&("string"==typeof a?(n=e.I=(t=>{let e=i(E);return e.innerHTML=t,e.content})(a),o=e.j=Z(f(n))):(n=a===t?t:(t=>{let e=i($);return e.append(...t),e})(a),o=t.S||Z(t.l||f(n)))),t.V=e.V=s||L++,e.I&&(n=i(n,!0)),o&&t.m(t.l||f(n),o),n!==t){const e=t.parentNode;e.l||(e.l=[].slice.call(f(e))),t.replaceWith(n)}}H(t,e,n){const o=this.D,s=o[t]||(o[t]=b([]));if(!e)return s;{const t=s.value;n?t[(t.length||1)-1]=e:t.push(e),s(t)}}}Object.assign(_.prototype,y);const tt={};let et,nt,ot=[];const st=b(),rt=b(),ct=(t,e)=>t[e]||t[t.default],lt=t=>t?(et=t,st(st.value||localStorage.getItem("locale")||navigator.language),void(nt||(nt=g((()=>{const[t,e]=st().split("-"),n=ct(ct(et,t),e);n&&n().then((t=>{rt(t.default),ot&&(ot=ot.forEach((t=>t())))}))}))))):rt();lt.locale=st,lt.onload=t=>{rt()?t():ot.push(t)},t.useDefine=(t,e)=>{const n="X-"+t.toUpperCase();return tt[n]=class extends _{constructor(){super()}},tt[n].J=e,tt[n].prototype.G=tt[n],customElements.define(`x-${t}`,tt[n]),tt[n]},t.useI18n=lt,t.useNavigate=J,t.useObserve=t=>{o={...t,...o},s=r},t.useSignal=b}));
